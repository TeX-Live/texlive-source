# @configure_input@

#========================================================================
#
# Goo library Makefile
#
# Copyright 1996 Derek B. Noonburg
#
#========================================================================

# ------------------------------------------------------------------------
# Changed by Martin Schröder <martin@pdftex.org>
# $Id: Makefile.in 494 2008-07-14 21:35:09Z oneiros $
# Changelog:
# ------------------------------------------------------------------------
# r493 | oneiros | 2008-07-14 23:32:04 +0200 (Mo, 14 Jul 2008) | 2 lines
#
# Also set -DDISABLE_OUTLINE (pdftoepdf.cc had conflicting options)
#
# ------------------------------------------------------------------------
# r390 | oneiros | 2008-03-23 16:51:58 +0100 (So, 23 Mär 2008) | 2 lines
#
# Merge changes since r357 to everything but pdftexdir from trunk into stable
#
# ------------------------------------------------------------------------
# r151 | ms | 2007-06-25 18:53:17 +0200 (Mo, 25 Jun 2007) | 3 lines
#
# Merging xpdf 3.02 from HEAD into stable
# svn merge -r149:150 --dry-run svn+ssh://svn/srv/svn/repos/pdftex/trunk/source/src/libs/xpdf .
#
# ------------------------------------------------------------------------
# r50 | ms | 2006-02-16 13:00:00 +0100 (Do, 16 Feb 2006) | 2 lines
#
# 1.30.6
#
# ------------------------------------------------------------------------
# r41 | ms | 2005-08-25 14:00:00 +0200 (Do, 25 Aug 2005) | 2 lines
#
# 1.30.2
#
# ------------------------------------------------------------------------
# r38 | ms | 2005-08-21 14:00:00 +0200 (So, 21 Aug 2005) | 2 lines
#
# 1.30.1

# ------------------------------------------------------------------------
# r33 | ms | 2005-08-01 14:01:00 +0200 (Mo, 01 Aug 2005) | 2 lines
#
# 1.30.0
#
# ------------------------------------------------------------------------
# r11 | ms | 2004-09-06 14:01:00 +0200 (Mo, 06 Sep 2004) | 2 lines
#
# 1.20a
#
# ------------------------------------------------------------------------
# r6 | ms | 2003-10-06 14:01:00 +0200 (Mo, 06 Okt 2003) | 2 lines
#
# released v1.11b
#
# ------------------------------------------------------------------------
# r4 | ms | 2003-10-05 14:00:00 +0200 (So, 05 Okt 2003) | 2 lines
#
# Moved sources to src
#
# ------------------------------------------------------------------------
# r1 | ms | 2003-08-02 14:00:00 +0200 (Sa, 02 Aug 2003) | 1 line
#
# 1.11a
# ------------------------------------------------------------------------

srcdir = @srcdir@
VPATH = @srcdir@

srcdirparent = $(srcdir)/..

kpathsea_include_dir = -I../../../texk -I$(srcdir)/../../../texk
ALLCFLAGS = $(CFLAGS) @DEFS@ -I.. -I$(srcdir)/.. -I. -I$(srcdir) $(kpathsea_include_dir)
ALLCXXFLAGS = $(CXXFLAGS) @DEFS@ \
  -I.. -I$(srcdir)/.. -I. -I$(srcdir) $(kpathsea_include_dir) \
  -DPDF_PARSER_ONLY
CXXFLAGS = @CXXFLAGS@
CC = @CC@
CXX = @CXX@
CFLAGS = @CFLAGS@

kpse_include ../../texk/make/library.mk


#------------------------------------------------------------------------

.SUFFIXES:
.SUFFIXES: .cc .c .o

.cc.o:
	$(CXX) $(ALLCXXFLAGS) -c $<
.c.o:
	$(CC) $(ALLCFLAGS) -c $<

#------------------------------------------------------------------------

CXX_SRC = \
	$(srcdir)/FixedPoint.cc \
	$(srcdir)/GHash.cc \
	$(srcdir)/GList.cc \
	$(srcdir)/GString.cc \
	$(srcdir)/gmem.cc \
	$(srcdir)/gmempp.cc \
	$(srcdir)/gfile.cc

C_SRC = \
	$(srcdir)/parseargs.c

#------------------------------------------------------------------------

GOO_CXX_OBJS = FixedPoint.o GHash.o GList.o GString.o gmem.o gmempp.o gfile.o
GOO_C_OBJS = parseargs.o
GOO_OBJS = $(GOO_CXX_OBJS) $(GOO_C_OBJS)

libGoo.a: $(GOO_OBJS)
	rm -f $@
	$(AR) $(ARFLAGS) $@ $(GOO_OBJS)
	$(RANLIB) $@

#------------------------------------------------------------------------

mostlyclean clean:
	rm -f $(GOO_OBJS) libGoo.a
	rm -f Makefile.bak

distclean maintainer-clean extraclean: clean
	rm -f Makefile

#------------------------------------------------------------------------

depend:
	srcdirparent=`(cd $(srcdirparent) >/dev/null; pwd)`; \
	  ($(CXX) $(ALLCXXFLAGS) -MM $(srcdir)/*.cc; \
	   $(CC) $(ALLCFLAGS) -MM $(srcdir)/*.c) \
	     | sed 's|$(srcdir)|$$(srcdir)|' \
             | sed 's|'$$srcdirparent/'|$$(srcdirparent)/|g' > $(srcdir)/depend.mk

kpse_include goo/depend.mk
