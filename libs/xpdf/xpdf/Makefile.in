# @configure_input@

#========================================================================
#
# Xpdf Makefile
#
# Copyright 1996 Derek B. Noonburg
#
# Heavily modified for pdftex by Thomas Esser, 1998, 1999
#
# $Id: Makefile.in 494 2008-07-14 21:35:09Z oneiros $
#========================================================================

# ------------------------------------------------------------------------
# Changed by Martin Schröder <martin@pdftex.org>
# $Id: Makefile.in 494 2008-07-14 21:35:09Z oneiros $
# Changelog:
# ------------------------------------------------------------------------
# r493 | oneiros | 2008-07-14 23:32:04 +0200 (Mo, 14 Jul 2008) | 2 lines
#
# Also set -DDISABLE_OUTLINE (pdftoepdf.cc had conflicting options)
#
# ------------------------------------------------------------------------
# r390 | oneiros | 2008-03-23 16:51:58 +0100 (So, 23 Mär 2008) | 2 lines
# 
# Merge changes since r357 to everything but pdftexdir from trunk into stable
# 
# ------------------------------------------------------------------------
# r298 | oneiros | 2007-11-30 14:38:28 +0100 (Fr, 30 Nov 2007) | 2 lines
# 
# sort PDFTOEPDF_OBJS
# 
# ------------------------------------------------------------------------
# r41 | ms | 2005-08-25 14:00:00 +0200 (Do, 25 Aug 2005) | 2 lines
# 
# 1.30.2
# 
# ------------------------------------------------------------------------
# r38 | ms | 2005-08-21 14:00:00 +0200 (So, 21 Aug 2005) | 2 lines
# 
# 1.30.1
# 
# ------------------------------------------------------------------------
# r33 | ms | 2005-08-01 14:01:00 +0200 (Mo, 01 Aug 2005) | 2 lines
# 
# 1.30.0
# 
# ------------------------------------------------------------------------
# r11 | ms | 2004-09-06 14:01:00 +0200 (Mo, 06 Sep 2004) | 2 lines
# 
# 1.20a
# 
# ------------------------------------------------------------------------
# r6 | ms | 2003-10-06 14:01:00 +0200 (Mo, 06 Okt 2003) | 2 lines
# 
# released v1.11b
# 
# ------------------------------------------------------------------------
# r4 | ms | 2003-10-05 14:00:00 +0200 (So, 05 Okt 2003) | 2 lines
# 
# Moved sources to src
# 
# ------------------------------------------------------------------------
# r1 | ms | 2003-08-02 14:00:00 +0200 (Sa, 02 Aug 2003) | 1 line
# 
# 1.11a
# ------------------------------------------------------------------------

VPATH = @srcdir@
srcdir = @srcdir@

srcdirparent = $(srcdir)/..
goodir = $(srcdirparent)/goo
fofidir=$(srcdirparent)/fofi

CXXFLAGS = @CXXFLAGS@
CXX = @CXX@
ALLCXXFLAGS = $(CXXFLAGS) -DHAVE_CONFIG_H $(XCFLAGS) \
  -I.. -I$(srcdirparent) -I$(goodir) -I$(fofidir) -I. -I$(srcdir) \
  -DPDF_PARSER_ONLY -DDISABLE_OUTLINE

kpse_include ../../texk/make/library.mk

.SUFFIXES:
.SUFFIXES: .cc .o
.cc.o:
	$(CXX) $(ALLCXXFLAGS) -c $<

#------------------------------------------------------------------------

PDFTOEPDF_OBJS = \
	Array.o BuiltinFont.o BuiltinFontTables.o Catalog.o \
	CharCodeToUnicode.o CMap.o Decrypt.o Dict.o Error.o \
	FontEncodingTables.o Function.o GfxFont.o GfxState.o\
	GlobalParams.o JArithmeticDecoder.o JBIG2Stream.o JPXStream.o \
	Lexer.o Link.o NameToCharCode.o Object.o Outline.o OutputDev.o \
	Page.o Parser.o PDFDocEncoding.o PDFDoc.o PSTokenizer.o \
	SecurityHandler.o Stream.o UnicodeMap.o XRef.o 

libxpdf.a: $(PDFTOEPDF_OBJS)
	rm -f $@
	$(AR) $(ARFLAGS) $@ $(PDFTOEPDF_OBJS)
	$(RANLIB) $@

#------------------------------------------------------------------------

mostlyclean clean:
	rm -f $(PDFTOEPDF_OBJS) libxpdf.a
	rm -f Makefile.bak

distclean maintainer-clean extraclean: clean
	rm -f Makefile c-auto.h

#------------------------------------------------------------------------

depend:
	srcdirparent=`(cd $(srcdirparent) >/dev/null; pwd)`; \
	  $(CXX) $(ALLCXXFLAGS) -MM $(srcdir)/*.cc \
	  | sed 's|$(srcdir)|$$(srcdir)|g' \
	  | sed 's|'$$srcdirparent/'|$$(srcdirparent)/|g' \
	  | sed 's|$$(srcdirparent)/goo/|$$(goodir)/|g' \
	  | sed 's|$$(srcdirparent)/fofi/|$$(fofidir)/|g' \
	  > $(srcdir)/depend.mk

#------------------------------------------------------------------------

kpse_include xpdf/depend.mk
